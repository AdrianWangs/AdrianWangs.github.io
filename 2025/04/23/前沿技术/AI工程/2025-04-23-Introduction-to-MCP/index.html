<!DOCTYPE html>
<html lang="zh">
<head><!-- hexo injector head_begin start --><script src="https://cdn.jsdelivr.net/npm/echarts@5.6.0/dist/echarts.min.js"></script><!-- hexo injector head_begin end -->
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"adrianwangs.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Model Context Protocol (MCP) 介绍 为什么我们需要MCP 当今的大型语言模型(LLM)虽然功能强大，但在与外部世界交互时仍面临诸多挑战：  上下文窗口限制：模型能接收的信息量有限，导致处理大型代码库或数据集困难 数据隐私问题：敏感数据需要发送到云端处理，增加了隐私和安全风险 工具集成碎片化：每个LLM提供商有不同的工具集成方式，导致开发者需维护多套代码 本地资源访问受限">
<meta property="og:type" content="article">
<meta property="og:title" content="Model Context Protocol (MCP) 介绍">
<meta property="og:url" content="https://adrianwangs.github.io/2025/04/23/%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/AI%E5%B7%A5%E7%A8%8B/2025-04-23-Introduction-to-MCP/index.html">
<meta property="og:site_name" content="Adrian Wang&#39;s blog">
<meta property="og:description" content="Model Context Protocol (MCP) 介绍 为什么我们需要MCP 当今的大型语言模型(LLM)虽然功能强大，但在与外部世界交互时仍面临诸多挑战：  上下文窗口限制：模型能接收的信息量有限，导致处理大型代码库或数据集困难 数据隐私问题：敏感数据需要发送到云端处理，增加了隐私和安全风险 工具集成碎片化：每个LLM提供商有不同的工具集成方式，导致开发者需维护多套代码 本地资源访问受限">
<meta property="og:locale">
<meta property="article:published_time" content="2025-04-23T11:46:39.000Z">
<meta property="article:modified_time" content="2025-08-03T08:26:58.847Z">
<meta property="article:author" content="Adrian Wang">
<meta property="article:tag" content="MCP">
<meta property="article:tag" content="LLM">
<meta property="article:tag" content="工具集成">
<meta property="article:tag" content="AI架构">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://adrianwangs.github.io/2025/04/23/%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/AI%E5%B7%A5%E7%A8%8B/2025-04-23-Introduction-to-MCP/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh'
  };
</script>

  <title>Model Context Protocol (MCP) 介绍 | Adrian Wang's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Adrian Wang's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">一个完全由AI生成，但是内容高质量的Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-首页">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-全部文章">

    <a href="/archives" rel="section"><i class="fa fa-th-list fa-fw"></i>全部文章</a>

  </li>
        <li class="menu-item menu-item-面试经验">

    <a href="/interview" rel="section"><i class="fa fa-briefcase fa-fw"></i>面试经验</a>

  </li>
        <li class="menu-item menu-item-golang">

    <a href="/golang" rel="section"><i class="fa fa-brands fa-golang fa-fw"></i>Golang</a>

  </li>
        <li class="menu-item menu-item-mysql">

    <a href="/mysql" rel="section"><i class="fa fa-database fa-fw"></i>MySQL</a>

  </li>
        <li class="menu-item menu-item-redis">

    <a href="/redis" rel="section"><i class="fa fa-fire fa-fw"></i>Redis</a>

  </li>
        <li class="menu-item menu-item-计算机网络">

    <a href="/network" rel="section"><i class="fa fa-globe fa-fw"></i>计算机网络</a>

  </li>
        <li class="menu-item menu-item-leetcode题解">

    <a href="/algorithms" rel="section"><i class="fa fa-book fa-fw"></i>Leetcode题解</a>

  </li>
        <li class="menu-item menu-item-关于我">

    <a href="/about" rel="section"><i class="fa fa-user fa-fw"></i>关于我</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/AdrianWangs" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh">
    <link itemprop="mainEntityOfPage" href="https://adrianwangs.github.io/2025/04/23/%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/AI%E5%B7%A5%E7%A8%8B/2025-04-23-Introduction-to-MCP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/72337244">
      <meta itemprop="name" content="Adrian Wang">
      <meta itemprop="description" content="一个完全由AI生成，但是内容高质量的Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Adrian Wang's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Model Context Protocol (MCP) 介绍
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-04-23 11:46:39" itemprop="dateCreated datePublished" datetime="2025-04-23T11:46:39+00:00">2025-04-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-03 08:26:58" itemprop="dateModified" datetime="2025-08-03T08:26:58+00:00">2025-08-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">前沿技术</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/AI%E5%B7%A5%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">AI工程</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>5.8k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>5 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1>Model Context Protocol (MCP) 介绍</h1>
<h2 id="为什么我们需要MCP">为什么我们需要MCP</h2>
<p>当今的大型语言模型(LLM)虽然功能强大，但在与外部世界交互时仍面临诸多挑战：</p>
<ul>
<li><strong>上下文窗口限制</strong>：模型能接收的信息量有限，导致处理大型代码库或数据集困难</li>
<li><strong>数据隐私问题</strong>：敏感数据需要发送到云端处理，增加了隐私和安全风险</li>
<li><strong>工具集成碎片化</strong>：每个LLM提供商有不同的工具集成方式，导致开发者需维护多套代码</li>
<li><strong>本地资源访问受限</strong>：很难让LLM安全地访问本地文件系统、数据库或应用程序</li>
<li><strong>多系统协作困难</strong>：让LLM与多个不同服务协同工作缺乏统一标准</li>
</ul>
<p>Model Context Protocol (MCP)正是为解决这些问题而诞生的技术标准，它提供了一种统一、安全、灵活的方式，让语言模型能够与各种外部系统和资源进行交互。</p>
<h2 id="MCP是什么">MCP是什么</h2>
<p>Model Context Protocol (MCP) 是一种用于构建LLM（大型语言模型）应用程序的客户端-服务器架构协议，它允许AI模型与外部数据源和工具进行交互。</p>
<blockquote>
<p><strong>名词解释</strong>：</p>
<ul>
<li><strong>客户端-服务器架构</strong>：一种计算模型，其中一个程序(客户端)请求服务，另一个程序(服务器)提供服务。就像餐厅中顾客(客户端)点餐，厨房(服务器)准备食物。</li>
<li><strong>协议</strong>：一套规则，定义了系统间如何交换信息。类似于人们交流的语言和礼仪规范。</li>
<li><strong>API(应用程序接口)</strong>：软件组件之间的连接点，允许不同程序相互通信。就像电源插座是电器与电网的接口。</li>
</ul>
</blockquote>
<p>MCP的核心思想是通过标准化的协议，让语言模型能够安全、灵活地访问各种本地和远程资源。这不仅仅是一个简单的API或函数调用系统，而是一个完整的架构模式，具有以下核心特征：</p>
<ol>
<li><strong>协议驱动</strong>: MCP 定义了客户端和服务器之间通信的标准协议，使不同组件能够无缝协作</li>
<li><strong>资源抽象</strong>: 将各种数据源、工具和服务抽象为统一的资源接口</li>
<li><strong>分布式设计</strong>: 支持多个服务器并行提供不同功能，实现功能解耦</li>
<li><strong>安全隔离</strong>: 明确的安全边界，数据保持在服务器端，只有结果返回给客户端</li>
<li><strong>可组合性</strong>: 不同MCP服务器可以组合使用，形成复杂的工作流</li>
</ol>
<h2 id="日常使用场景：MCP如何改变我们使用AI的方式">日常使用场景：MCP如何改变我们使用AI的方式</h2>
<h3 id="场景一：本地文档助手">场景一：本地文档助手</h3>
<p><strong>问题</strong>：王先生有大量存储在本地电脑上的工作文档，他想让AI助手帮忙整理和总结，但又担心文档内容上传到云端会有安全风险。</p>
<p><strong>MCP解决方案</strong>：</p>
<ol>
<li>王先生在电脑上安装了支持MCP的Claude Desktop应用和文件系统MCP服务器</li>
<li>当他询问&quot;帮我总结所有2025年第一季度的会议记录&quot;时</li>
<li>Claude会通过MCP服务器安全地搜索本地文件系统</li>
<li>文档内容不会离开王先生的电脑，只有搜索结果返回给Claude</li>
<li>Claude根据获取的会议内容生成总结报告</li>
</ol>
<p>这一过程对王先生来说完全透明，他只需正常与AI交谈，但所有数据处理都在本地完成，保证了信息安全。</p>
<h3 id="场景二：代码开发助手">场景二：代码开发助手</h3>
<p><strong>问题</strong>：张女士是一名软件开发人员，使用AI助手编写代码，但发现AI无法访问她的本地代码库、运行测试或执行Git操作。</p>
<p><strong>MCP解决方案</strong>：</p>
<ol>
<li>张女士在IDE中使用支持MCP的AI编码助手</li>
<li>IDE运行多个MCP服务器，分别处理代码访问、测试运行和版本控制</li>
<li>当张女士要求&quot;根据单元测试结果修复这个bug&quot;时</li>
<li>AI通过代码访问MCP服务器读取相关文件</li>
<li>通过测试MCP服务器运行测试并获取结果</li>
<li>分析问题并生成修复方案</li>
<li>通过Git MCP服务器创建修复分支和提交更改</li>
</ol>
<p>整个过程在张女士的本地环境完成，无需将完整代码库上传到云端，同时AI助手能够与她的开发工具流完美集成。</p>
<h2 id="详细协议结构">详细协议结构</h2>
<p>MCP协议主要包含以下关键组件：</p>
<ul>
<li><strong>连接管理</strong>: 建立和维护客户端与服务器之间的连接</li>
<li><strong>资源发现</strong>: 允许客户端发现服务器提供的资源和功能</li>
<li><strong>资源请求</strong>: 客户端向服务器请求特定资源</li>
<li><strong>资源响应</strong>: 服务器处理请求并返回结果</li>
<li><strong>元数据交换</strong>: 交换有关资源和功能的元数据</li>
<li><strong>安全机制</strong>: 保护传输中的数据并验证请求的合法性</li>
</ul>
<h2 id="基本原理与架构">基本原理与架构</h2>
<p>MCP采用客户端-服务器架构，其中：</p>
<ul>
<li><strong>MCP主机（Hosts）</strong>：如Claude Desktop、IDE或AI工具，希望通过MCP访问数据的程序</li>
<li><strong>MCP客户端（Clients）</strong>：维护与服务器1:1连接的协议客户端，负责发送请求和接收响应</li>
<li><strong>MCP服务器（Servers）</strong>：通过标准化的Model Context Protocol公开特定功能的轻量级程序，负责处理请求并返回结果</li>
<li><strong>本地数据源</strong>：MCP服务器可以安全访问的计算机文件、数据库和服务</li>
<li><strong>远程服务</strong>：MCP服务器可以连接的外部系统（如通过API）</li>
</ul>
<p>这种架构可以通过以下Mermaid图表表示：</p>
<h2 id="MCP通信流程">MCP通信流程</h2>
<p>MCP通信过程是如何实现LLM与各种资源交互的关键。以下是一个典型的MCP通信流程：</p>
<pre class="mermaid">sequenceDiagram
    participant User as 用户
    participant LLM as 语言模型
    participant Host as 主机应用
    participant Client as MCP客户端
    participant Server as MCP服务器
    participant DataSource as 数据源
  
    User-&gt;&gt;Host: 提出请求
    Host-&gt;&gt;LLM: 转发用户请求
    LLM--&gt;&gt;Host: 需要访问外部资源
  
    Host-&gt;&gt;Client: 资源请求
    Client-&gt;&gt;Server: 发送MCP请求
    Server-&gt;&gt;DataSource: 数据访问
    DataSource--&gt;&gt;Server: 返回数据
    Server--&gt;&gt;Client: MCP响应
    Client--&gt;&gt;Host: 返回资源
  
    Host-&gt;&gt;LLM: 提供资源
    LLM--&gt;&gt;Host: 基于资源的响应
    Host-&gt;&gt;User: 显示结果</pre>
<h2 id="资源接口设计">资源接口设计</h2>
<p>MCP定义了一套资源接口，使客户端能够统一访问各种不同类型的资源：</p>
<pre class="mermaid">classDiagram
    class Resource {
        +String resourceId
        +String resourceType
        +Metadata metadata
        +request(parameters)
    }
  
    class FileResource {
        +String path
        +readContent()
        +writeContent(data)
    }
  
    class DatabaseResource {
        +String connectionString
        +query(sql)
        +update(sql)
    }
  
    class APIResource {
        +String endpoint
        +call(parameters)
    }
  
    Resource &lt;|-- FileResource
    Resource &lt;|-- DatabaseResource
    Resource &lt;|-- APIResource</pre>
<h2 id="MCP与Function-Call的区别">MCP与Function Call的区别</h2>
<p>MCP和Function Call都是扩展LLM能力的技术，但它们在设计和实现上存在显著差异：</p>
<h3 id="Function-Call">Function Call</h3>
<p>Function Call（函数调用）是一种让LLM能够调用预定义函数的能力，主要特点：</p>
<ul>
<li>通常在单一环境中运行</li>
<li>函数定义必须嵌入到模型的上下文中，占用token空间</li>
<li>典型的实现是在LLM生成函数调用JSON后，由应用程序执行相应函数</li>
<li>安全边界通常由应用程序自身定义</li>
<li>通常需要为每个LLM提供商实现不同的集成方式</li>
</ul>
<pre class="mermaid">sequenceDiagram
    participant User as 用户
    participant App as 应用程序
    participant LLM as 语言模型
    participant Functions as 函数库
  
    User-&gt;&gt;App: 提出请求
    App-&gt;&gt;LLM: 请求(包含函数定义)
    Note over App,LLM: 函数定义占用上下文空间
  
    LLM-&gt;&gt;App: 函数调用JSON
    App-&gt;&gt;Functions: 执行函数
    Functions-&gt;&gt;App: 返回结果
    App-&gt;&gt;LLM: 结果作为新上下文
    LLM-&gt;&gt;App: 生成最终响应
    App-&gt;&gt;User: 显示结果</pre>
<h3 id="MCP">MCP</h3>
<p>MCP则提供了一个更加分布式、标准化的架构：</p>
<ul>
<li>采用客户端-服务器架构，明确分离责任</li>
<li>多个专用服务器可以并行提供不同功能，支持横向扩展</li>
<li>通过标准协议实现互操作性，与LLM提供商无关</li>
<li>明确的安全边界，数据保持在服务器端</li>
<li>可以跨应用程序和环境重用，提高代码复用性</li>
<li>资源动态发现，无需预先定义所有功能</li>
</ul>
<pre class="mermaid">sequenceDiagram
    participant User as 用户
    participant Host as 主机应用
    participant LLM as 语言模型
    participant Client as MCP客户端
    participant ServerA as MCP服务器A
    participant ServerB as MCP服务器B
    participant DataA as 数据源A
    participant DataB as 数据源B
  
    User-&gt;&gt;Host: 提出请求
    Host-&gt;&gt;LLM: 转发请求
  
    LLM-&gt;&gt;Host: 需要资源A
    Host-&gt;&gt;Client: 请求资源A
    Client-&gt;&gt;ServerA: MCP请求
    ServerA-&gt;&gt;DataA: 访问数据
    DataA--&gt;&gt;ServerA: 返回数据
    ServerA--&gt;&gt;Client: MCP响应
    Client--&gt;&gt;Host: 返回资源A
    Host-&gt;&gt;LLM: 提供资源A
  
    LLM-&gt;&gt;Host: 需要资源B
    Host-&gt;&gt;Client: 请求资源B
    Client-&gt;&gt;ServerB: MCP请求
    ServerB-&gt;&gt;DataB: 访问数据
    DataB--&gt;&gt;ServerB: 返回数据
    ServerB--&gt;&gt;Client: MCP响应
    Client--&gt;&gt;Host: 返回资源B
    Host-&gt;&gt;LLM: 提供资源B
  
    LLM-&gt;&gt;Host: 生成最终响应
    Host-&gt;&gt;User: 显示结果</pre>
<h2 id="MCP的优势">MCP的优势</h2>
<p>MCP相比传统Function Call和其他工具集成方法有以下优势：</p>
<ol>
<li><strong>灵活性</strong>：可以轻松切换LLM提供商和供应商，无需重写集成</li>
<li><strong>安全性</strong>：数据保持在您的基础设施内，明确的安全边界</li>
<li><strong>可扩展性</strong>：可以根据需要连接多个专用服务器，支持复杂功能</li>
<li><strong>互操作性</strong>：标准化协议确保不同系统间的兼容，避免供应商锁定</li>
<li><strong>本地计算</strong>：可以在本地环境中执行计算，无需将敏感数据发送到云端</li>
<li><strong>分布式架构</strong>：不同服务可以在不同位置运行，提高系统弹性和可用性</li>
<li><strong>动态发现</strong>：客户端可以动态发现服务器提供的资源，无需硬编码</li>
<li><strong>隔离性</strong>：不同服务器之间相互隔离，一个服务器的问题不会影响其他服务器</li>
</ol>
<h2 id="实际应用场景">实际应用场景</h2>
<p>MCP可以应用于多种场景：</p>
<ul>
<li><strong>开发环境集成</strong>：在IDE中通过MCP访问本地代码库、运行测试、执行版本控制操作</li>
<li><strong>数据分析</strong>：安全访问和处理本地数据库或文件系统中的数据，执行复杂分析</li>
<li><strong>企业应用</strong>：与内部系统安全集成，访问企业知识库、CRM系统、ERP系统等</li>
<li><strong>个人助手</strong>：访问个人文件和应用程序，同时保持数据隐私，如日历、邮件、笔记</li>
<li><strong>混合云部署</strong>：在本地和云端之间无缝集成资源，实现数据和功能的最佳分配</li>
<li><strong>多模型协作</strong>：允许多个不同的LLM通过相同的接口访问相同的资源，实现模型协作</li>
</ul>
<h2 id="MCP实现示例">MCP实现示例</h2>
<p>以下是一个简化的MCP服务器实现示例，展示了如何创建一个提供文件系统访问的MCP服务器：</p>
<pre class="mermaid">flowchart TD
    A[初始化MCP服务器] --&gt; B{注册资源处理器}
    B --&gt; C[文件读取处理器]
    B --&gt; D[文件写入处理器]
    B --&gt; E[目录列表处理器]
    C &amp; D &amp; E --&gt; F[启动HTTP服务]
    F --&gt; G{处理客户端请求}
    G --&gt; H[解析请求类型]
    H --&gt; I{资源类型?}
    I --&gt;|读取文件| J[调用文件读取处理器]
    I --&gt;|写入文件| K[调用文件写入处理器]
    I --&gt;|列出目录| L[调用目录列表处理器]
    J &amp; K &amp; L --&gt; M[格式化响应]
    M --&gt; N[返回结果给客户端]</pre>
<h2 id="MCP的发展现状">MCP的发展现状</h2>
<p>MCP是一项相对新兴的技术标准，目前正处于快速发展阶段：</p>
<ul>
<li><strong>提出与标准化</strong>：由Anthropic公司于2023年底提出并开始标准化</li>
<li><strong>当前版本</strong>：最新的MCP规范版本为2025-03-26，提供了完整的协议定义</li>
</ul>
<h3 id="支持MCP的平台和工具">支持MCP的平台和工具</h3>
<p>目前已有多个平台和工具支持MCP：</p>
<ul>
<li><strong>Claude Desktop</strong>：Anthropic的桌面应用是首个广泛支持MCP的平台，允许用户连接各种MCP服务器</li>
<li><strong>各类IDE插件</strong>：如Visual Studio Code和JetBrains系列IDE的插件开始支持MCP，提供代码编辑助手功能</li>
<li><strong>开发工具包</strong>：提供了Python、TypeScript、Java等多种语言的SDK，方便开发者构建MCP服务器</li>
<li><strong>样例实现</strong>：官方提供了文件系统、数据库连接、API调用等多种MCP服务器示例实现</li>
</ul>
<h3 id="社区与生态系统">社区与生态系统</h3>
<p>MCP正在形成活跃的开发者社区：</p>
<ul>
<li><strong>GitHub组织</strong>：ModelContextProtocol组织托管了官方规范和SDK代码</li>
<li><strong>开源贡献</strong>：社区开发者积极贡献各种MCP服务器实现和客户端集成</li>
<li><strong>商业应用</strong>：一些企业开始开发基于MCP的商业产品和服务，尤其是在企业AI和数据分析领域</li>
</ul>
<p>虽然MCP仍在发展中，但其已经显示出成为AI系统与外部世界交互的重要标准的潜力。随着更多平台和工具加入支持，MCP的生态系统有望在未来几年内迅速扩大。</p>
<h2 id="结论">结论</h2>
<p>Model Context Protocol (MCP) 代表了LLM工具集成的一种新方向，它通过标准化、分布式架构解决了许多传统方法的限制。通过将功能拆分到专用服务器，同时保持统一的协议接口，MCP为构建更强大、更安全、更灵活的AI应用程序提供了坚实的基础。</p>
<p>MCP的出现标志着AI工具集成从简单的函数调用向成熟的分布式系统架构演进，为构建下一代AI应用提供了更完善的基础设施支持。随着LLM继续融入各种应用程序和工作流程，MCP这样的标准将变得越来越重要，它使开发人员能够在保持数据安全的同时，充分发挥语言模型的潜力。<br>
言模型的潜力。</p>

      
    </div>

    

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/MCP/" rel="tag"># MCP</a>
              <a href="/tags/LLM/" rel="tag"># LLM</a>
              <a href="/tags/%E5%B7%A5%E5%85%B7%E9%9B%86%E6%88%90/" rel="tag"># 工具集成</a>
              <a href="/tags/AI%E6%9E%B6%E6%9E%84/" rel="tag"># AI架构</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/04/22/%E5%85%AB%E8%82%A1%E6%96%87/MYSQL/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/MySQL%E9%A1%B5%E7%B1%BB%E5%9E%8B/" rel="prev" title="MySQL 页类型详解">
      <i class="fa fa-chevron-left"></i> MySQL 页类型详解
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/04/23/%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98/LeetCode-2-%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0/" rel="next" title="LeetCode 2 - 两数相加（Add Two Numbers）">
      LeetCode 2 - 两数相加（Add Two Numbers） <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">Model Context Protocol (MCP) 介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81MCP"><span class="nav-number">1.1.</span> <span class="nav-text">为什么我们需要MCP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MCP%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">1.2.</span> <span class="nav-text">MCP是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9AMCP%E5%A6%82%E4%BD%95%E6%94%B9%E5%8F%98%E6%88%91%E4%BB%AC%E4%BD%BF%E7%94%A8AI%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="nav-number">1.3.</span> <span class="nav-text">日常使用场景：MCP如何改变我们使用AI的方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E4%B8%80%EF%BC%9A%E6%9C%AC%E5%9C%B0%E6%96%87%E6%A1%A3%E5%8A%A9%E6%89%8B"><span class="nav-number">1.3.1.</span> <span class="nav-text">场景一：本地文档助手</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E4%BA%8C%EF%BC%9A%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%8A%A9%E6%89%8B"><span class="nav-number">1.3.2.</span> <span class="nav-text">场景二：代码开发助手</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%A6%E7%BB%86%E5%8D%8F%E8%AE%AE%E7%BB%93%E6%9E%84"><span class="nav-number">1.4.</span> <span class="nav-text">详细协议结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9E%B6%E6%9E%84"><span class="nav-number">1.5.</span> <span class="nav-text">基本原理与架构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MCP%E9%80%9A%E4%BF%A1%E6%B5%81%E7%A8%8B"><span class="nav-number">1.6.</span> <span class="nav-text">MCP通信流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B5%84%E6%BA%90%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.7.</span> <span class="nav-text">资源接口设计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MCP%E4%B8%8EFunction-Call%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.8.</span> <span class="nav-text">MCP与Function Call的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Function-Call"><span class="nav-number">1.8.1.</span> <span class="nav-text">Function Call</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MCP"><span class="nav-number">1.8.2.</span> <span class="nav-text">MCP</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MCP%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="nav-number">1.9.</span> <span class="nav-text">MCP的优势</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">1.10.</span> <span class="nav-text">实际应用场景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MCP%E5%AE%9E%E7%8E%B0%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.11.</span> <span class="nav-text">MCP实现示例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MCP%E7%9A%84%E5%8F%91%E5%B1%95%E7%8E%B0%E7%8A%B6"><span class="nav-number">1.12.</span> <span class="nav-text">MCP的发展现状</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%AF%E6%8C%81MCP%E7%9A%84%E5%B9%B3%E5%8F%B0%E5%92%8C%E5%B7%A5%E5%85%B7"><span class="nav-number">1.12.1.</span> <span class="nav-text">支持MCP的平台和工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BE%E5%8C%BA%E4%B8%8E%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.12.2.</span> <span class="nav-text">社区与生态系统</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%93%E8%AE%BA"><span class="nav-number">1.13.</span> <span class="nav-text">结论</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Adrian Wang"
      src="https://avatars.githubusercontent.com/u/72337244">
  <p class="site-author-name" itemprop="name">Adrian Wang</p>
  <div class="site-description" itemprop="description">一个完全由AI生成，但是内容高质量的Blog</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">171</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">231</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/AdrianWangs" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;AdrianWangs" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wyz17601402786@gmail.com" title="E-Mail → mailto:wyz17601402786@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Adrian Wang</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">760k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">11:31</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>











<script>
const mermaidBlocks = document.querySelectorAll('pre.mermaid'); // Get all mermaid blocks
if (mermaidBlocks.length) {
  console.log('Found Mermaid blocks:', mermaidBlocks.length); // Log how many blocks were found

  // Log the content of each block before initialization
  mermaidBlocks.forEach((block, index) => {
    console.log(`--- Mermaid Block ${index + 1} Content ---`);
    console.log(block.textContent || block.innerText); // Log the raw text content
    console.log(`--------------------------------------`);
  });

  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@11.6.0/dist/mermaid.js', () => {
    console.log('Mermaid script loaded. Initializing...'); // Log initialization start
    try { // Add try...catch around initialization and rendering
      mermaid.initialize({
        theme    : 'forest',
        logLevel : 3, // Keep logLevel 3 for potential Mermaid internal logs
        flowchart: { curve     : 'linear' },
        gantt    : { axisFormat: '%m/%d/%Y' },
        sequence : { actorMargin: 50 }
        // Consider adding startOnLoad: false if you manually call mermaid.run() later
        // startOnLoad: false
      });
      console.log('Mermaid initialized.');

      // Explicitly render after initialization (if startOnLoad is false or for clarity)
      // mermaid.run({ nodes: mermaidBlocks }); // Or mermaid.init(undefined, mermaidBlocks); depending on version
      // console.log('Mermaid rendering attempted.');

    } catch (e) {
      console.error('Error during Mermaid initialization or rendering:', e);
    }
  }, window.mermaid);
} else {
  console.log('No Mermaid blocks found on this page.');
}
</script>

  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'Ov23ctYPrSZhEEiMSWnG',
      clientSecret: '868a26bca9ec039212bdc83e05c4420b6077e9f4',
      repo        : 'blog-comments',
      owner       : 'AdrianWangs',
      admin       : ['AdrianWangs'],
      id          : '811b75ceca8c42ea84c64ccc9b70f9e7',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

<script src="https://cdn.jsdelivr.net/npm/echarts@5.5.1/dist/echarts.min.js"></script>
        
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const heatmapChartDom = document.getElementById('heatmapChart');
                if(heatmapChartDom){
                    const heatmapChart = echarts.init(heatmapChartDom, 'dark');
                    const cellSize = [18, 18];
                    
                    const groupByYear = (data) => {
                        const result = {};
                        data.forEach(([date, value]) => {
                            const [year] = date.split('-').map(Number);
                            if (!result[year]) {
                                result[year] = [];
                            }
                            result[year].push([date, value]);
                        });
                        return result;
                    };
                    
                    const groupedData = groupByYear([["2024-07-30",1],["2025-04-18",2],["2025-04-19",2],["2025-04-20",3],["2025-04-21",2],["2025-04-22",3],["2025-04-23",2],["2025-04-24",4],["2025-04-25",2],["2025-04-27",1],["2025-04-28",2],["2025-04-29",5],["2025-04-30",3],["2025-05-02",1],["2025-05-03",1],["2025-05-04",3],["2025-05-05",4],["2025-05-06",5],["2025-05-07",3],["2025-05-08",4],["2025-05-10",8],["2025-05-11",4],["2025-05-12",1],["2025-05-13",3],["2025-05-14",2],["2025-05-15",1],["2025-05-16",5],["2025-05-17",4],["2025-05-18",4],["2025-05-20",2],["2025-05-21",6],["2025-05-22",2],["2025-05-24",2],["2025-05-25",4],["2025-05-26",2],["2025-05-27",4],["2025-05-28",1],["2025-05-30",4],["2025-05-31",1],["2025-06-01",1],["2025-06-02",1],["2025-06-03",3],["2025-06-04",1],["2025-06-05",1],["2025-06-06",2],["2025-06-07",1],["2025-06-08",6],["2025-06-09",1],["2025-06-13",1],["2025-06-15",3],["2025-06-16",9],["2025-06-17",3],["2025-06-18",1],["2025-06-21",5],["2025-06-22",4],["2025-06-23",1],["2025-06-25",1],["2025-06-29",2],["2025-07-01",1],["2025-07-02",1],["2025-07-03",1],["2025-07-06",1],["2025-07-09",1],["2025-07-20",3],["2025-07-26",2],["2025-08-03",1]]);
                    const years = Object.keys(groupedData).reverse();
                    
                    var initYear = parseInt(heatmapChartDom.getAttribute('year')) || new Date().getFullYear();
                    const minYear = years[years.length - 1];
                    const maxYear = years[0];
                    if (initYear < minYear || initYear > maxYear) {
                        initYear = maxYear;
                    }
                    console.log('[hexo-graph]generateHeatmapChart|initYear:', initYear, 'minYear:', minYear, 'maxYear:', maxYear);
                    
                    heatmapChart.setOption({
                        grid: {},
                        tooltip: { 
                            position: 'top', 
                            formatter: params => `${params.value[0]}: ${params.value[1]} Articles` 
                        },
                        calendar: { 
                            top: '10%',
                            left: 'left', 
                            right: '8%',
                            range: initYear,
                            cellSize: cellSize, 
                            splitLine: { lineStyle: { color: '#E0E0E0', width: 1 } }, 
                            itemStyle: { borderWidth: 1, borderColor: '#E0E0E0' }, 
                            dayLabel: { show: false },
                            monthLabel: { show: true },
                            yearLabel: { show: false },
                        },
                        visualMap: { 
                            show: true,
                            right: '8%',
                            bottom: '5%',
                            type: 'piecewise',
                            orient: 'horizontal',
                            text: ['More', 'Less'],
                            min: 0,
                            max: Math.max(...groupedData[initYear].map(item => item[1])),
                            inRange: { color: ["#ACE7AE","#69C16D","#549F57"] }
                        },
                        legend: {
                            type: 'scroll',
                            icon: 'none',
                            data: years,
                            orient: 'vertical',
                            top: '5%',
                            right: 'right',
                            itemWidth: 20,
                            itemHeight: 20,
                            itemGap: 10,
                            pageIconSize: 10,
                            pageTextStyle: { fontSize: 14 },
                            selectedMode: 'single',
                        },
                        series: years.map(year => ({
                            type: 'heatmap',
                            coordinateSystem: 'calendar',
                            data: groupedData[year],
                            name: year,
                            emphasis: {
                                disabled: true,
                            },
                            silent: year !== initYear,
                        })),
                    });
                    
                    // init selected year
                    heatmapChart.dispatchAction({
                        type: 'legendSelect',
                        name: initYear,
                    });
                    
                    heatmapChart.on('legendselectchanged', function(params) {
                        console.log('[hexo-graph]generateHeatmapChart|legendselectchanged:', params);
                        const selectedYear = Object.keys(params.selected).find(key => params.selected[key]);
                        if (selectedYear && groupedData[selectedYear]) {
                            heatmapChart.setOption({
                                calendar: {
                                    range: selectedYear,
                                },
                                visualMap: {
                                    max: Math.max(...groupedData[selectedYear].map(item => item[1])),
                                },
                                series: years.map(year => ({
                                    type: 'heatmap',
                                    coordinateSystem: 'calendar',
                                    data: groupedData[year],
                                    name: year,
                                    emphasis: {
                                        disabled: true,
                                    },
                                    silent: year !== selectedYear,
                                })),
                            });
                        }
                    });
                    
                    heatmapChart.on('click', function (params) {
                        if (params.componentType === 'series') {
                            const [year, month] = params.value[0].split('-');
                            window.location.href = '/archives/' + year + '/' + month;
                        }
                    });
                }
            });
        </script>
    
        
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const monthlyChartDom = document.getElementById('monthlyChart');
                if(monthlyChartDom){
                    const monthlyChart = echarts.init(monthlyChartDom, 'dark');
                    monthlyChart.setOption({
                        xAxis: { 
                            type: 'category', 
                            data: ["2024-07","2025-04","2025-05","2025-06","2025-07","2025-08"], 
                            axisLabel: { fontSize: 14, fontWeight: 'bold', fontFamily: 'Microsoft YaHei, SimSun, serif' }
                        },
                        yAxis: { type: 'value', splitLine: { lineStyle: { type: 'dashed', color: '#ccc' } } },
                        series: [{
                            name: 'Articles',
                            type: 'line',
                            data: [1,31,81,47,10,1],
                            smooth: true,
                            lineStyle: { color: '#5470C6', width: 2 },
                            itemStyle: { color: '#5470C6' },
                            areaStyle: { color: 'rgba(84, 112, 198, 0.4)' },
                            symbolSize: 10,
                            label: {
                                show: true,
                                position: 'top',
                                formatter: params => params.value,
                                fontSize: 14,
                                color: '#000',
                                fontWeight: 'bold',
                                fontFamily: 'Microsoft YaHei, SimSun, serif'
                            }
                        }]
                    });

                    monthlyChart.on('click', function (params) {
                        const [year, month] = params.name.split('-');
                        window.location.href = '/archives/' + year + '/' + month;
                    });
                }
            })
        </script>
    
        
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const tagsChartDom = document.getElementById('tagsChart');
                if(tagsChartDom){
                    const tagsChart = echarts.init(tagsChartDom, 'dark');
                    tagsChart.setOption({
                        tooltip: { trigger: 'item', formatter: '{b}: {c} ({d}%)' },
                        series: [{
                            type: 'pie',
                            radius: '60%',
                            data: [{"name":"LeetCode","value":88},{"name":"Medium","value":70},{"name":"Hot100","value":58},{"name":"数组","value":34},{"name":"面试经典150","value":32},{"name":"八股文","value":25},{"name":"❌错题集","value":25},{"name":"深度优先搜索","value":22}],
                            label: {
                                position: 'outside',
                                formatter: '{b} {c} ({d}%)',
                                fontSize: 14,
                                fontWeight: 'bold',
                                fontFamily: 'Microsoft YaHei, SimSun, serif'
                            },
                            color: ["#5470C6","#91CC75","#FAC858","#EE6666","#73C0DE","#3BA272","#FC8452","#9A60B4"],
                            labelLine: { show: true }
                        }],
                        legend: {
                            bottom: '0',
                            left: 'center',
                            data: [{"name":"LeetCode","value":88},{"name":"Medium","value":70},{"name":"Hot100","value":58},{"name":"数组","value":34},{"name":"面试经典150","value":32},{"name":"八股文","value":25},{"name":"❌错题集","value":25},{"name":"深度优先搜索","value":22}].map(tag => tag.name),
                            textStyle: { fontSize: 14, fontWeight: 'bold', fontFamily: 'Microsoft YaHei, SimSun, serif' }
                        }
                    });

                    tagsChart.on('click', function (params) {
                        window.location.href = '/tags/' + params.name;
                    });
                }
            })
        </script>
    
        
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const categoriesChartDom = document.getElementById('categoriesChart');
                if(categoriesChartDom){
                    const categoriesChart = echarts.init(categoriesChartDom, 'dark');
                    categoriesChart.setOption({
                        xAxis: { type: 'value', splitLine: { lineStyle: { type: 'dashed', color: '#ccc' } } },
                        yAxis: { 
                            type: 'category', 
                            data: [{"name":"算法刷题","value":101},{"name":"LeetCode","value":99},{"name":"Hot100","value":63},{"name":"八股文","value":50},{"name":"面试经典150","value":35}].map(category => category.name).reverse(), 
                            axisLabel: { fontSize: 14, fontWeight: 'bold', fontFamily: 'Microsoft YaHei, SimSun, serif' }
                        },
                        series: [{
                            name: 'Category Count',
                            type: 'bar',
                            data: [{"name":"算法刷题","value":101},{"name":"LeetCode","value":99},{"name":"Hot100","value":63},{"name":"八股文","value":50},{"name":"面试经典150","value":35}].map(category => category.value).reverse(),
                            label: {
                                show: true,
                                position: 'right',
                                formatter: params => params.value,
                                fontSize: 14,
                                color: '#000',
                                fontWeight: 'bold',
                                fontFamily: 'Microsoft YaHei, SimSun, serif'
                            },
                            itemStyle: {
                                color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [
                                    { offset: 0, color: '#91CC75' },
                                    { offset: 1, color: '#73C0DE' }
                                ])
                            }
                        }]
                    });

                    categoriesChart.on('click', function (params) {
                        window.location.href = '/categories/' + params.name;
                    });
                }
            });
        </script>
    
        
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const categoriesTreeChartDom = document.getElementById('categoriesTreeChart');
                if(categoriesTreeChartDom){
                    const treeChart = echarts.init(categoriesTreeChartDom, 'dark');
                    treeChart.setOption({
                        title: {
                            text: '操作提示：单击展开分类，双击进入具体分类页面',
                            textStyle: {
                                fontSize: 12,
                                color: '#999',
                                fontWeight: 'normal'
                            },
                            bottom: 0,
                            left: 'center'
                        },
                        tooltip: {
                            trigger: 'item',
                            triggerOn: 'mousemove'
                        },
                        series: [{
                            type: 'tree',
                            data: [{"name":"Categories","children":[{"name":"面试经验","children":[],"count":8,"path":"面试经验"},{"name":"算法刷题","children":[{"name":"LeetCode","children":[{"name":"面试经典150","children":[{"name":"错题集","children":[],"count":1,"path":"算法刷题/LeetCode/面试经典150/错题集"}],"count":35,"path":"算法刷题/LeetCode/面试经典150"},{"name":"Hot100","children":[],"count":63,"path":"算法刷题/LeetCode/Hot100"}],"count":99,"path":"算法刷题/LeetCode"}],"count":101,"path":"算法刷题"},{"name":"技术八股","children":[{"name":"操作系统","children":[],"count":1,"path":"技术八股/操作系统"},{"name":"Go语言","children":[],"count":8,"path":"技术八股/Go语言"}],"count":10,"path":"技术八股"},{"name":"八股文","children":[{"name":"操作系统","children":[],"count":1,"path":"八股文/操作系统"},{"name":"Go语言","children":[],"count":1,"path":"八股文/Go语言"},{"name":"计算机网络","children":[],"count":1,"path":"八股文/计算机网络"},{"name":"REDIS","children":[{"name":"分布式锁","children":[],"count":1,"path":"八股文/REDIS/分布式锁"},{"name":"缓存","children":[],"count":2,"path":"八股文/REDIS/缓存"},{"name":"高可用","children":[],"count":3,"path":"八股文/REDIS/高可用"},{"name":"基础知识","children":[{"name":"内存管理","children":[],"count":1,"path":"八股文/REDIS/基础知识/内存管理"},{"name":"数据结构","children":[],"count":8,"path":"八股文/REDIS/基础知识/数据结构"},{"name":"数据类型","children":[],"count":5,"path":"八股文/REDIS/基础知识/数据类型"}],"count":19,"path":"八股文/REDIS/基础知识"}],"count":25,"path":"八股文/REDIS"},{"name":"MySQL","children":[{"name":"内存","children":[],"count":1,"path":"八股文/MySQL/内存"},{"name":"基础知识","children":[],"count":5,"path":"八股文/MySQL/基础知识"},{"name":"日志","children":[],"count":1,"path":"八股文/MySQL/日志"},{"name":"锁","children":[],"count":6,"path":"八股文/MySQL/锁"},{"name":"事务","children":[],"count":2,"path":"八股文/MySQL/事务"},{"name":"索引","children":[],"count":7,"path":"八股文/MySQL/索引"}],"count":22,"path":"八股文/MySQL"}],"count":50,"path":"八股文"},{"name":"系统设计","children":[],"count":1,"path":"系统设计"},{"name":"前沿技术","children":[{"name":"AI工程","children":[],"count":1,"path":"前沿技术/AI工程"}],"count":1,"path":"前沿技术"}],"count":0,"path":""}],
                            initialTreeDepth: -1,
                            top: '5%',
                            bottom: '10%',
                            left: '0%',
                            right: '0%',
                            symbolSize: 15,
                            layout: 'orthogonal',
                            orient: 'TB',
                            itemStyle: {
                                color: '#91CC75',
                                borderColor: '#73C0DE'
                            },
                            label: {
                                position: 'bottom',
                                verticalAlign: 'middle',
                                align: 'center',
                                fontSize: 14,
                                distance: 28,
                                formatter: function(params) {
                                    return params.data.name + (params.data.count ? ' (' + params.data.count + ')' : '');
                                }
                            },
                            leaves: {
                                label: {
                                    position: 'top',
                                    verticalAlign: 'middle',
                                    align: 'center'
                                }
                            },
                            emphasis: {
                                focus: 'descendant'
                            },
                            expandAndCollapse: true
                        }]
                    });

                    treeChart.on('dblclick', function (params) {
                        if (params.data && params.data.path) {
                            window.location.href = '/categories/' + params.data.path;
                        }
                    });
                }
            });
        </script>
    
    </body>
</html>
